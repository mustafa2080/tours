{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% trans "Home" %} - {% trans "Tourism Project" %}{% endblock title %}



{% block content %}
<!-- Slider Section with Fade In/Out Transitions -->
<section
    class="relative z-40"
    style="height: calc(100vh - var(--top-bar-height));"
    x-data="{ activeSlide: 0, slides: 3, showSearch: false }"
    x-init="setInterval(() => activeSlide = (activeSlide + 1) % slides, 5000)"
>
    <div class="h-full w-full relative overflow-hidden">
        <!-- Slide 1 -->
        <div
            x-show="activeSlide === 0"
            x-transition:enter="transition ease-in-out duration-1000"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in-out duration-1000"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="absolute inset-0 h-full w-full"
            style="background-image: url('{% static 'images/slide1.jpg' %}'); background-size: cover; background-position: center;"
        >
            <div class="absolute inset-0 bg-black opacity-50"></div>
            <div class="container mx-auto px-4 z-10 text-center absolute inset-0 flex flex-col items-center justify-center">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 sm:mb-6 text-white">{% trans "Discover Your Dream Destination" %}</h1>
                <p class="text-lg sm:text-xl md:text-2xl mb-6 sm:mb-10 text-white max-w-3xl mx-auto">{% trans "Unforgettable experiences and breathtaking adventures await you around the world." %}</p>
                <button
                    @click="showSearch = !showSearch"
                    class="mt-4 bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                >
                    <i class="fas fa-search mr-2"></i> {% trans "Search for Adventures" %}
                </button>
            </div>
        </div>

        <!-- Slide 2 -->
        <div
            x-show="activeSlide === 1"
            x-transition:enter="transition ease-in-out duration-1000"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in-out duration-1000"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="absolute inset-0 h-full w-full"
            style="background-image: url('{% static 'images/slide2.jpg' %}'); background-size: cover; background-position: center;"
        >
            <div class="absolute inset-0 bg-gradient-to-r from-blue-900/60 to-purple-900/60"></div>
            <div class="container mx-auto px-4 z-10 text-center absolute inset-0 flex flex-col items-center justify-center">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 sm:mb-6 text-white">{% trans "Explore Exotic Locations" %}</h1>
                <p class="text-lg sm:text-xl md:text-2xl mb-6 sm:mb-10 text-white max-w-3xl mx-auto">{% trans "From tropical beaches to mountain peaks, find your perfect escape." %}</p>
                <a href="{% url 'tour:tour_list' %}" class="mt-4 bg-white text-blue-800 px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-lg font-bold inline-block transition-all duration-300 transform hover:scale-105 hover:bg-gray-100">{% trans "Browse Popular Tours" %}</a>
            </div>
        </div>

        <!-- Slide 3 -->
        <div
            x-show="activeSlide === 2"
            x-transition:enter="transition ease-in-out duration-1000"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in-out duration-1000"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="absolute inset-0 h-full w-full"
            style="background-image: url('{% static 'images/slide3.jpg' %}'); background-size: cover; background-position: center;"
        >
            <div class="absolute inset-0 bg-gradient-to-b from-green-900/60 to-black/60"></div>
            <div class="container mx-auto px-4 z-10 text-center absolute inset-0 flex flex-col items-center justify-center">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 sm:mb-6 text-white">{% trans "Immerse in Local Culture" %}</h1>
                <p class="text-lg sm:text-xl md:text-2xl mb-6 sm:mb-10 text-white max-w-3xl mx-auto">{% trans "Authentic experiences curated by expert local guides." %}</p>
                <a href="#" class="mt-4 bg-transparent border-2 border-white text-white px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-lg font-bold inline-block hover:bg-white hover:text-green-900 transition-all duration-300 transform hover:scale-105">{% trans "See Cultural Tours" %}</a>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <button
            @click="activeSlide = (activeSlide - 1 + slides) % slides"
            class="absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white w-12 h-12 rounded-full flex items-center justify-center z-30 transition-all duration-300 hover:bg-opacity-70 hover:scale-110"
        >
            <i class="fas fa-chevron-left"></i>
        </button>
        <button
            @click="activeSlide = (activeSlide + 1) % slides"
            class="absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white w-12 h-12 rounded-full flex items-center justify-center z-30 transition-all duration-300 hover:bg-opacity-70 hover:scale-110"
        >
            <i class="fas fa-chevron-right"></i>
        </button>

        <!-- Pagination Dots -->
        <div class="absolute bottom-8 left-0 right-0 flex justify-center space-x-2 z-20">
            <button
                @click="activeSlide = 0"
                :class="{'bg-white': activeSlide === 0, 'bg-gray-400': activeSlide !== 0}"
                class="w-3 h-3 rounded-full transition-all duration-300 hover:bg-white hover:scale-125"
            ></button>
            <button
                @click="activeSlide = 1"
                :class="{'bg-white': activeSlide === 1, 'bg-gray-400': activeSlide !== 1}"
                class="w-3 h-3 rounded-full transition-all duration-300 hover:bg-white hover:scale-125"
            ></button>
            <button
                @click="activeSlide = 2"
                :class="{'bg-white': activeSlide === 2, 'bg-gray-400': activeSlide !== 2}"
                class="w-3 h-3 rounded-full transition-all duration-300 hover:bg-white hover:scale-125"
            ></button>
        </div>
    </div>

    <!-- Floating Search Bar -->
    <div
        x-show="showSearch"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform -translate-y-10"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform -translate-y-10"
        class="absolute inset-x-0 top-1/4 z-50 px-4"
        @click.away="showSearch = false"
    >
        <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-2xl p-4 backdrop-blur-sm bg-opacity-95">
            <form action="{% url 'tour:tour_search' %}" method="get" class="flex flex-col md:flex-row items-center gap-2">
                <div class="flex-grow relative">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    <input type="text" name="keyword" placeholder="{% trans 'Where do you want to go?' %}" class="w-full px-10 py-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary rounded-lg newsletter-input">
                </div>
                <div class="w-full md:w-auto">
                    <button type="submit" class="w-full bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white font-bold py-4 px-8 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                        {% trans "Find Adventures" %}
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

<!-- Featured Tours Section -->
{% if featured_tours %}
<section class="py-16 sm:py-20">
    <div class="container mx-auto px-4">
        <div class="flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12">
            <h2 class="text-3xl sm:text-4xl font-bold text-gray-800 relative pb-3 after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-1 after:w-24 after:bg-primary mb-4 sm:mb-0 animate-on-scroll" data-animation="fadeInLeft">{% trans "Featured Tours" %}</h2>
            <a href="{% url 'tour:tour_list' %}" class="text-primary hover:text-primary-dark font-semibold flex items-center group animate-on-scroll" data-animation="fadeInRight">
                {% trans "View All" %} <i class="fas fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform duration-300"></i>
            </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-10">
            {% for tour in featured_tours %}
                <div class="animate-on-scroll" data-animation="fadeInUp" data-delay="{{ forloop.counter|add:'-1' }}00">
                    {% include 'tour/partials/tour_card.html' with tour=tour %}
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Tour Categories Section with Larger Cards -->
{% if tour_categories %}
<section class="py-16 sm:py-20 bg-gray-100">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl sm:text-4xl font-bold text-center mb-3 sm:mb-4 text-gray-800 animate-on-scroll" data-animation="fadeInDown">{% trans "Explore by Category" %}</h2>
        <p class="text-lg sm:text-xl text-center text-gray-600 mb-8 sm:mb-12 max-w-3xl mx-auto animate-on-scroll" data-animation="fadeInUp">{% trans "Find the perfect tour experience tailored to your interests" %}</p>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 sm:gap-8">
            {% for category in tour_categories %}
                <a href="{% url 'tour:tour_list' %}?category={{ category.slug }}" class="group overflow-hidden rounded-xl bg-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 animate-on-scroll" data-animation="zoomIn" data-delay="{{ forloop.counter|add:'-1' }}00">
                    <div class="aspect-square bg-gray-100 flex items-center justify-center overflow-hidden">
                        {% if category.image %}
                            <img src="{{ category.image.url }}" alt="{{ category.name }}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                        {% elif category.icon %}
                            <div class="text-5xl sm:text-6xl text-primary group-hover:scale-110 transition-transform duration-500 p-6 sm:p-8">
                                <i class="{{ category.icon }}"></i>
                            </div>
                        {% else %}
                            <div class="text-5xl sm:text-6xl text-primary group-hover:scale-110 transition-transform duration-500 p-6 sm:p-8">
                                üåç
                            </div>
                        {% endif %}
                    </div>
                    <div class="p-4 sm:p-6 text-center">
                        <h3 class="font-bold text-lg sm:text-xl text-gray-800">{{ category.name }}</h3>
                        <p class="text-base sm:text-lg text-gray-600 mt-2 group-hover:text-primary transition-colors duration-300">{% trans "Explore" %} <i class="fas fa-chevron-right text-sm ml-2 transform group-hover:translate-x-1 transition-transform duration-300"></i></p>
                    </div>
                </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Testimonials Section -->
<section class="py-16 sm:py-20 bg-blue-50">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl sm:text-4xl font-bold text-center mb-3 sm:mb-4 text-gray-800 animate-on-scroll" data-animation="fadeInDown">{% trans "What Our Travelers Say" %}</h2>
        <p class="text-lg sm:text-xl text-center text-gray-600 mb-8 sm:mb-12 max-w-3xl mx-auto animate-on-scroll" data-animation="fadeInUp">{% trans "Read the experiences shared by travelers from around the world" %}</p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8">
            {% if testimonials %}
                {% for review in testimonials %}
                    <div class="bg-white p-6 sm:p-8 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 animate-on-scroll"
                         data-animation="{% if forloop.counter == 1 %}fadeInLeft{% elif forloop.counter == 2 %}fadeIn{% else %}fadeInRight{% endif %}"
                         data-delay="{{ forloop.counter|add:'-1' }}00">
                        <div class="text-yellow-400 flex mb-4">
                            {% for i in "12345" %}
                                {% if forloop.counter <= review.rating %}
                                    <i class="fas fa-star"></i>
                                {% else %}
                                    <i class="far fa-star"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <p class="text-gray-700 mb-6">"{{ review.comment|truncatechars:150 }}"</p>
                        <div class="flex items-center">
                            {% if review.user.profile_picture %}
                                <img src="{{ review.user.profile_picture.url }}" alt="{{ review.user.get_full_name }}" class="w-12 h-12 rounded-full object-cover mr-4">
                            {% else %}
                                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold mr-4">
                                    {{ review.user.get_initials }}
                                </div>
                            {% endif %}
                            <div>
                                <h4 class="font-bold text-gray-800">{{ review.user.get_full_name }}</h4>
                                <p class="text-gray-600 text-sm">{{ review.tour.name }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <!-- Fallback if no testimonials are available -->
                <div class="bg-white p-6 sm:p-8 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 animate-on-scroll" data-animation="fadeInLeft">
                    <div class="text-yellow-400 flex mb-4">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="text-gray-700 mb-6">"{% trans "The tour was absolutely amazing! Our guide was knowledgeable and friendly. I couldn't have asked for a better experience exploring the beautiful landscapes." %}"</p>
                    <div class="flex items-center">
                        <div class="w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-bold mr-4">JD</div>
                        <div>
                            <h4 class="font-bold text-gray-800">{% trans "John Doe" %}</h4>
                            <p class="text-gray-600 text-sm">{% trans "Paris Tour" %}</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 sm:p-8 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 animate-on-scroll" data-animation="fadeIn" data-delay="200">
                    <div class="text-yellow-400 flex mb-4">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="text-gray-700 mb-6">"{% trans "This was the trip of a lifetime! Every detail was perfectly arranged, from accommodations to activities. I'll definitely book with this company again!" %}"</p>
                    <div class="flex items-center">
                        <div class="w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-bold mr-4">JS</div>
                        <div>
                            <h4 class="font-bold text-gray-800">{% trans "Jane Smith" %}</h4>
                            <p class="text-gray-600 text-sm">{% trans "Japan Adventure" %}</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 sm:p-8 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 animate-on-scroll" data-animation="fadeInRight" data-delay="400">
                    <div class="text-yellow-400 flex mb-4">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                    </div>
                    <p class="text-gray-700 mb-6">"{% trans "The cultural immersion was incredible. I learned so much about the local traditions and history. The food experiences alone were worth the trip!" %}"</p>
                    <div class="flex items-center">
                        <div class="w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-bold mr-4">MR</div>
                        <div>
                            <h4 class="font-bold text-gray-800">{% trans "Michael Rodriguez" %}</h4>
                            <p class="text-gray-600 text-sm">{% trans "Thailand Discovery" %}</p>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>

        {% if testimonials %}
        <div class="text-center mt-8">
            <a href="{% url 'tour:tour_list' %}" class="inline-flex items-center text-primary hover:text-primary-dark font-semibold group">
                {% trans "See More Reviews" %}
                <span class="ml-2 group-hover:translate-x-2 transition-transform duration-300">‚Üí</span>
            </a>
        </div>
        {% endif %}
    </div>
</section>

<!-- Latest Blog Posts Section -->
{% if latest_posts %}
<section class="py-16 sm:py-20">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl sm:text-4xl font-bold text-center mb-3 sm:mb-4 text-gray-800 animate-on-scroll" data-animation="fadeInDown">{% trans "Travel Inspiration" %}</h2>
        <p class="text-lg sm:text-xl text-center text-gray-600 mb-8 sm:mb-12 max-w-3xl mx-auto animate-on-scroll" data-animation="fadeInUp">{% trans "Stories and tips from our travel experts" %}</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8">
            {% for post in latest_posts %}
                <div class="animate-on-scroll" data-animation="fadeInUp" data-delay="{{ forloop.counter|add:'-1' }}00">
                    {% include 'blog/partials/post_card.html' with post=post %}
                </div>
            {% endfor %}
        </div>
        <div class="text-center mt-8 sm:mt-12 animate-on-scroll" data-animation="fadeIn" data-delay="500">
            <a href="{% url 'blog:post_list' %}" class="inline-flex items-center text-primary hover:text-primary-dark font-semibold group">
                {% trans "Explore All Articles" %}
                <span class="ml-2 group-hover:translate-x-2 transition-transform duration-300">‚Üí</span>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Call to Action Section -->
<section class="py-20 sm:py-24 bg-cover bg-center relative" style="background-image: url('{% static 'images/cta-background.jpg' %}')">
    <div class="absolute inset-0 bg-blue-900 opacity-80"></div>
    <div class="container mx-auto px-4 text-center relative z-10">
        <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-4 sm:mb-6 text-white animate-on-scroll" data-animation="fadeInDown">{% trans "Ready for Your Next Adventure?" %}</h2>
        <p class="text-lg sm:text-xl text-white mb-6 sm:mb-10 max-w-2xl mx-auto animate-on-scroll" data-animation="fadeIn" data-delay="200">{% trans "Join thousands of satisfied travelers and book your dream tour today. Special discounts available for early bookings!" %}</p>
        <div class="flex flex-col sm:flex-row justify-center gap-4 animate-on-scroll" data-animation="fadeInUp" data-delay="400">
            <a href="{% url 'tour:tour_list' %}" class="bg-white hover:bg-gray-100 text-primary font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-lg transition duration-300 transform hover:scale-105">
                {% trans "Browse Tours" %}
            </a>
            <a href="{% url 'core:contact' %}" class="bg-transparent border-2 border-white text-white hover:bg-white hover:text-primary font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-lg transition duration-300 transform hover:-translate-y-1">
                {% trans "Contact Us" %}
            </a>
        </div>
    </div>
</section>

<!-- Newsletter Subscription -->
<section class="py-12 sm:py-16 bg-gray-100">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6 sm:p-8 md:p-12 animate-on-scroll" data-animation="zoomIn">
            <div class="text-center mb-6 sm:mb-8">
                <h3 class="text-2xl sm:text-3xl font-bold mb-3 sm:mb-4 text-gray-800">{% trans "Get Travel Inspiration" %}</h3>
                <p class="text-gray-600">{% trans "Subscribe to our newsletter for exclusive deals, travel tips, and destination guides" %}</p>
            </div>
            <form class="flex flex-col md:flex-row gap-3 sm:gap-4">
                <input type="email" placeholder="{% trans 'Your email address' %}" class="flex-grow px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300 newsletter-input">
                <button type="submit" class="bg-primary hover:bg-primary-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 transform hover:scale-105">
                    {% trans "Subscribe" %}
                </button>
            </form>
            <p class="text-xs text-gray-500 mt-4 text-center">{% trans "We respect your privacy. Unsubscribe at any time." %}</p>
        </div>
    </div>
</section>
{% endblock content %}

{% block extra_css %}
<!-- Animate.css for animations (only included if not already in base.html) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" integrity="sha512-c42qTSw/wiW5tT0/JhqR75+UzWFNQv+RWKjVEGsWllwpLf+xoIqHH3fKXKH5kb6tNiv2mPxjC7t0+4vOtzZOItA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
    /* Animation helpers */
    .animate-on-scroll {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .animate-on-scroll.is-visible {
        opacity: 1;
        transform: translateY(0);
    }
    /* Ensure consistency with base.html transitions */
    .newsletter-input:focus {
        border-color: #1a56db;
        box-shadow: 0 0 0 3px rgba(26, 86, 219, 0.3);
    }


</style>
{% endblock extra_css %}

{% block extra_js %}
<!-- Parallax.js for background effects (only included if needed) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/parallax.js/1.5.0/par¬†Wallax.min.js" integrity="sha512-6E6qV26INdDNAeXmu4vinylsQv2H5wXgGIrDS81GXOjQKyMpS3LDPjW0OYxneVWW2a3dDYVtWpuW8NxTDzISDHg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Smooth scrolling for anchor links (consistent with base.html loader)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Scroll animations with IntersectionObserver
        const animatedElements = document.querySelectorAll('.animate-on-scroll');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const animation = entry.target.dataset.animation || 'fadeIn';
                    const delay = entry.target.dataset.delay || '0';
                    entry.target.classList.add('animate__animated', `animate__${animation}`, 'is-visible');
                    entry.target.style.animationDelay = `${delay}ms`;
                    observer.unobserve(entry.target);
                }
            });
        }, {
            root: null,
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });
        animatedElements.forEach(element => observer.observe(element));

        // Parallax effect for CTA section (if Parallax.js is loaded)
        if (typeof Parallax !== 'undefined') {
            const scene = document.querySelector('[data-parallax]');
            if (scene) {
                new Parallax(scene, {
                    relativeInput: false,
                    clipRelativeInput: false,
                    hoverOnly: false,
                    selector: '.bg-cover',
                    pointerEvents: true
                });
            }
        }
    });
</script>
{% endblock extra_js %}