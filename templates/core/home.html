{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% trans "Home" %} - {% trans "Tourism Project" %}{% endblock title %}



{% block content %}
<!-- Slider Section with Fade In/Out Transitions -->
<section
    class="relative z-40"
    style="height: calc(100vh - var(--top-bar-height));"
    x-data="{ activeSlide: 0, slides: 3, showSearch: false }"
    x-init="setInterval(() => activeSlide = (activeSlide + 1) % slides, 5000)"
>
    <div class="h-full w-full relative overflow-hidden">
        <!-- Slide 1 -->
        <div
            x-show="activeSlide === 0"
            x-transition:enter="transition ease-in-out duration-1000"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in-out duration-1000"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="absolute inset-0 h-full w-full"
            style="background-image: url('{% static 'images/slide1.jpg' %}'); background-size: cover; background-position: center;"
        >
            <div class="absolute inset-0 bg-black opacity-50"></div>
            <div class="container mx-auto px-4 z-10 text-center absolute inset-0 flex flex-col items-center justify-center">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 sm:mb-6 text-white">{% trans "Discover Your Dream Destination" %}</h1>
                <p class="text-lg sm:text-xl md:text-2xl mb-6 sm:mb-10 text-white max-w-3xl mx-auto">{% trans "Unforgettable experiences and breathtaking adventures await you around the world." %}</p>
                <button
                    @click="showSearch = !showSearch"
                    class="mt-4 bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                >
                    <i class="fas fa-search mr-2"></i> {% trans "Search for Adventures" %}
                </button>
            </div>
        </div>

        <!-- Slide 2 -->
        <div
            x-show="activeSlide === 1"
            x-transition:enter="transition ease-in-out duration-1000"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in-out duration-1000"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="absolute inset-0 h-full w-full"
            style="background-image: url('{% static 'images/slide2.jpg' %}'); background-size: cover; background-position: center;"
        >
            <div class="absolute inset-0 bg-gradient-to-r from-blue-900/60 to-purple-900/60"></div>
            <div class="container mx-auto px-4 z-10 text-center absolute inset-0 flex flex-col items-center justify-center">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 sm:mb-6 text-white">{% trans "Explore Exotic Locations" %}</h1>
                <p class="text-lg sm:text-xl md:text-2xl mb-6 sm:mb-10 text-white max-w-3xl mx-auto">{% trans "From tropical beaches to mountain peaks, find your perfect escape." %}</p>
                <a href="{% url 'tour:tour_list' %}" class="mt-4 bg-white text-blue-800 px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-lg font-bold inline-block transition-all duration-300 transform hover:scale-105 hover:bg-gray-100">{% trans "Browse Popular Tours" %}</a>
            </div>
        </div>

        <!-- Slide 3 -->
        <div
            x-show="activeSlide === 2"
            x-transition:enter="transition ease-in-out duration-1000"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in-out duration-1000"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="absolute inset-0 h-full w-full"
            style="background-image: url('{% static 'images/slide3.jpg' %}'); background-size: cover; background-position: center;"
        >
            <div class="absolute inset-0 bg-gradient-to-b from-green-900/60 to-black/60"></div>
            <div class="container mx-auto px-4 z-10 text-center absolute inset-0 flex flex-col items-center justify-center">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 sm:mb-6 text-white">{% trans "Immerse in Local Culture" %}</h1>
                <p class="text-lg sm:text-xl md:text-2xl mb-6 sm:mb-10 text-white max-w-3xl mx-auto">{% trans "Authentic experiences curated by expert local guides." %}</p>
                <a href="#" class="mt-4 bg-transparent border-2 border-white text-white px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-lg font-bold inline-block hover:bg-white hover:text-green-900 transition-all duration-300 transform hover:scale-105">{% trans "See Cultural Tours" %}</a>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <button
            @click="activeSlide = (activeSlide - 1 + slides) % slides"
            class="absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white w-12 h-12 rounded-full flex items-center justify-center z-30 transition-all duration-300 hover:bg-opacity-70 hover:scale-110"
        >
            <i class="fas fa-chevron-left"></i>
        </button>
        <button
            @click="activeSlide = (activeSlide + 1) % slides"
            class="absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white w-12 h-12 rounded-full flex items-center justify-center z-30 transition-all duration-300 hover:bg-opacity-70 hover:scale-110"
        >
            <i class="fas fa-chevron-right"></i>
        </button>

        <!-- Pagination Dots -->
        <div class="absolute bottom-8 left-0 right-0 flex justify-center space-x-2 z-20">
            <button
                @click="activeSlide = 0"
                :class="{'bg-white': activeSlide === 0, 'bg-gray-400': activeSlide !== 0}"
                class="w-3 h-3 rounded-full transition-all duration-300 hover:bg-white hover:scale-125"
            ></button>
            <button
                @click="activeSlide = 1"
                :class="{'bg-white': activeSlide === 1, 'bg-gray-400': activeSlide !== 1}"
                class="w-3 h-3 rounded-full transition-all duration-300 hover:bg-white hover:scale-125"
            ></button>
            <button
                @click="activeSlide = 2"
                :class="{'bg-white': activeSlide === 2, 'bg-gray-400': activeSlide !== 2}"
                class="w-3 h-3 rounded-full transition-all duration-300 hover:bg-white hover:scale-125"
            ></button>
        </div>
    </div>

    <!-- Floating Search Bar -->
    <div
        x-show="showSearch"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform -translate-y-10"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform -translate-y-10"
        class="absolute inset-x-0 top-1/4 z-50 px-4"
        @click.away="showSearch = false"
    >
        <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-2xl p-4 backdrop-blur-sm bg-opacity-95">
            <form action="{% url 'tour:tour_search' %}" method="get" class="flex flex-col md:flex-row items-center gap-2">
                <div class="flex-grow relative">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    <input type="text" name="keyword" placeholder="{% trans 'Where do you want to go?' %}" class="w-full px-10 py-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary rounded-lg newsletter-input">
                </div>
                <div class="w-full md:w-auto">
                    <button type="submit" class="w-full bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white font-bold py-4 px-8 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                        {% trans "Find Adventures" %}
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

<!-- Featured Tours Section -->
{% if featured_tours %}
<section class="py-16 sm:py-20">
    <div class="container mx-auto px-4">
        <div class="flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12">
            <h2 class="text-3xl sm:text-4xl font-bold text-gray-800 relative pb-3 after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-1 after:w-24 after:bg-primary mb-4 sm:mb-0 animate-on-scroll" data-animation="fadeInLeft">{% trans "Featured Tours" %}</h2>
            <a href="{% url 'tour:tour_list' %}" class="text-primary hover:text-primary-dark font-semibold flex items-center group animate-on-scroll" data-animation="fadeInRight">
                {% trans "View All" %} <i class="fas fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform duration-300"></i>
            </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-10">
            {% for tour in featured_tours %}
                <div class="animate-on-scroll" data-animation="fadeInUp" data-delay="{{ forloop.counter|add:'-1' }}00">
                    {% include 'tour/partials/tour_card.html' with tour=tour %}
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Tour Categories Section with Larger Cards -->
{% if tour_categories %}
<section class="py-16 sm:py-20 bg-gray-100">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl sm:text-4xl font-bold text-center mb-3 sm:mb-4 text-gray-800 animate-on-scroll" data-animation="fadeInDown">{% trans "Explore by Category" %}</h2>
        <p class="text-lg sm:text-xl text-center text-gray-600 mb-8 sm:mb-12 max-w-3xl mx-auto animate-on-scroll" data-animation="fadeInUp">{% trans "Find the perfect tour experience tailored to your interests" %}</p>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 sm:gap-8">
            {% for category in tour_categories %}
                <a href="{% url 'tour:tour_list' %}?category={{ category.slug }}" class="group overflow-hidden rounded-xl bg-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 animate-on-scroll" data-animation="zoomIn" data-delay="{{ forloop.counter|add:'-1' }}00">
                    <div class="aspect-square bg-gray-100 flex items-center justify-center overflow-hidden">
                        {% if category.image %}
                            <img src="{{ category.image.url }}" alt="{{ category.name }}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                        {% elif category.icon %}
                            <div class="text-5xl sm:text-6xl text-primary group-hover:scale-110 transition-transform duration-500 p-6 sm:p-8">
                                <i class="{{ category.icon }}"></i>
                            </div>
                        {% else %}
                            <div class="text-5xl sm:text-6xl text-primary group-hover:scale-110 transition-transform duration-500 p-6 sm:p-8">
                                🌍
                            </div>
                        {% endif %}
                    </div>
                    <div class="p-4 sm:p-6 text-center">
                        <h3 class="font-bold text-lg sm:text-xl text-gray-800">{{ category.name }}</h3>
                        <p class="text-base sm:text-lg text-gray-600 mt-2 group-hover:text-primary transition-colors duration-300">{% trans "Explore" %} <i class="fas fa-chevron-right text-sm ml-2 transform group-hover:translate-x-1 transition-transform duration-300"></i></p>
                    </div>
                </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

{% block extra_css %}
<!-- Animate.css for animations (only included if not already in base.html) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
    /* Animation helpers */
    .animate-on-scroll {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .animate-on-scroll.is-visible {
        opacity: 1;
        transform: translateY(0);
    }
    /* Ensure consistency with base.html transitions */
    .newsletter-input:focus {
        border-color: #1a56db;
        box-shadow: 0 0 0 3px rgba(26, 86, 219, 0.3);
    }
</style>
{% endblock extra_css %}

{% block extra_js %}
<!-- Parallax effects are handled by simpleParallax.js loaded in base.html -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Smooth scrolling for anchor links (consistent with base.html loader)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Scroll animations with IntersectionObserver
        const animatedElements = document.querySelectorAll('.animate-on-scroll');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const animation = entry.target.dataset.animation || 'fadeIn';
                    const delay = entry.target.dataset.delay || '0';
                    entry.target.classList.add('animate__animated', `animate__${animation}`, 'is-visible');
                    entry.target.style.animationDelay = `${delay}ms`;
                    observer.unobserve(entry.target);
                }
            });
        }, {
            root: null,
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });
        animatedElements.forEach(element => observer.observe(element));

        // Initialize simple-parallax-js for background elements
        if (typeof simpleParallax !== 'undefined') {
            // Find all elements with data-parallax attribute
            const parallaxElements = document.querySelectorAll('[data-parallax]');
            if (parallaxElements.length > 0) {
                // Initialize simpleParallax on these elements
                new simpleParallax(parallaxElements, {
                    delay: 0.6,
                    orientation: 'up',
                    scale: 1.3,
                    overflow: true,
                    transition: 'cubic-bezier(0,0,0,1)'
                });
            }

            // Also apply to hero section backgrounds
            const heroBackgrounds = document.querySelectorAll('.absolute.inset-0.h-full.w-full');
            if (heroBackgrounds.length > 0) {
                new simpleParallax(heroBackgrounds, {
                    delay: 0.4,
                    orientation: 'down',
                    scale: 1.2,
                    overflow: true
                });
            }
        }
    });
</script>
{% endblock extra_js %}
{% endblock content %}
